<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesource.org/schema/mule/core/2.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:stdio="http://www.mulesource.org/schema/mule/stdio/2.2"
	xmlns:ssh="http://www.mulesource.org/schema/mule/ssh/2.2"
	xmlns:vm="http://www.mulesource.org/schema/mule/vm/2.2"
	xsi:schemaLocation="
	http://www.mulesource.org/schema/mule/core/2.2 http://www.mulesource.org/schema/mule/core/2.2/mule.xsd
	http://www.mulesource.org/schema/mule/ssh/2.2 http://www.mulesource.org/schema/mule/ssh/2.2/mule-ssh.xsd
	http://www.mulesource.org/schema/mule/vm/2.2 http://www.mulesource.org/schema/mule/vm/2.2/mule-vm.xsd
	http://www.mulesource.org/schema/mule/stdio/2.2 http://www.mulesource.org/schema/mule/stdio/2.2/mule-stdio.xsd
	">

	<ssh:connector name="sshConnector" host="localhost" kexTimeout="3000"
		port="22" loginId="user" password="keypass" privateKeyPath="./test.id_rsa">
			<dispatcher-threading-profile doThreading="false" />
	</ssh:connector>
<!--	<stdio:connector name="stdioConnector" >-->
<!--		<receiver-threading-profile doThreading="false"/>-->
<!--		<dispatcher-threading-profile doThreading="false" maxThreadsActive="1"/>-->
<!--	</stdio:connector>-->
	<vm:connector name="vmConnector">
		<receiver-threading-profile doThreading="false"/>
	</vm:connector>
	
	<model name="SshTest">
		<service name="SshService">
			<inbound>
<!--				<stdio:inbound-endpoint system="IN" />-->

				<inbound-endpoint address="vm://test" >
					<response-transformers>
						<object-to-string-transformer/>
					</response-transformers>
				</inbound-endpoint>

			</inbound>
			<echo-component/>
			<outbound>
				<pass-through-router>
					<ssh:outbound-endpoint name="ssh-out" ssh="SEND" useSudo="true" 
						sudoPassword="sudopwd" responseTimeout="10000" synchronous="true" />
				</pass-through-router>
			</outbound>
		</service>
	</model>
</mule>
